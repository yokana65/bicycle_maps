---
title: "Development actions history"
output: html_document
editor_options: 
  chunk_output_type: console
---

All commands that you use to use when developing packages...

# First time just after creating the project

- Fill the following chunk to create the DESCRIPTION of your package

```{r description, eval=FALSE}
# Describe your package
fusen::fill_description(
  pkg = here::here(),
  fields = list(
    Title = "A package to draw tour maps given a route",
    Description = "The package provides broad functionality to draw tour maps with the suppot of OSM data and a georeferencer.",
    `Authors@R` = c(
      person("Yokana", "Katumba", email = "wagnerjoha.leipzig@gmail.com", role = c("aut", "cre"), comment = c(ORCID = "0000-0000-0000-0000"))
    )
  )
)
# Define License with use_*_license()
usethis::use_gpl3_license("Yokana Katumba")
usethis::use_pipe()
```

# Inflate save_data.Rmd

Start by inflating `dev/flat_save_data.Rmd`:

# Inflate save_data.Rmd

Start by inflating `dev/save_data.Rmd`:

```{r development-inflate, eval=FALSE}
# Run but keep eval=FALSE to avoid infinite loop
# Execute in the console directly
fusen::inflate(flat_file = "dev/save_data.Rmd",
               vignette_name = "dev-save_data",
               overwrite = T)

```


# Including datasets

The datasets created in the `save_data.Rmd` have still to be saved into the
`data/` folder of the package. This will make the datasets available using
`data("VG250_KRS")`. But the package has to be inflated once at least
before being able to save the data and document it. We are going to knit the
vignette generated from `save_data.Rmd` for this. This vignette contains all the
calls needed to save the data. Then, we are going to use `usethis::use_data()`
to save the datasets. We knit the vignette into a temporary file using `tempfile()`
because we’re not interested in the output itself, but simply want the datasets
to be generated. When using `knitr::knit()`, every object that is created in the 
knitted vignette would be made available in the global environment. In this case,
knitting the vinette would make `commune_level_data`, `country_level_data` and
`communes` available in the global environment, which in turn would make it possible
to save using `usethis::use_data(commune_level_data)`. But we don’t want to clutter
the global environment with these datasets, we only want to save them.

So to avoid cluttering the global environment, we run the calls inside `local()`.
`local()` runs code in a temporary environment which is then discarded. This makes
it possible to turn this operation pure:

```{r}
local({
  knitr::knit("vignettes/dev-save_data.Rmd", output = tempfile())
  usethis::use_data(commune_level_data, overwrite = TRUE)
  usethis::use_data(country_level_data, overwrite = TRUE)
  usethis::use_data(communes, overwrite = TRUE)
})

```

# Inflate package


```{r development-inflate, eval=FALSE}
# Run but keep eval=FALSE to avoid infinite loop
# Execute in the console directly
fusen::inflate(flat_file = "dev/flat_bicycle_pkg.Rmd",
               vignette_name = "dev-flat_bicycle_pkg",
               overwrite = T)

```